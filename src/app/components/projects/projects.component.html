<section id="projects" #projectsSection [@fadeSlideUp]="showElements ? 'visible' : 'static'" class="project-cards">
    <h2>Projetos</h2>
    <div class="content">
        <button (click)="scrollLeft()" [disabled]="atStart">
            <i class="fa fa-arrow-left arrow"></i>
        </button>
        <div class="cards" #cardsContainer>
            <div class="card" *ngFor="let project of projects; trackBy: trackProject">
                <div class="header">
                    <h3>{{project.type}}</h3>
                    <p>{{project.topic}}</p>
                </div>
                <div class="image-container">
                    <img
                        class="image"
                        [src]="project.screens[project.currentIndex].image"
                        [class.dark-filter]="project.screens[project.currentIndex].darkFilter"
                        [class.animate]="animate"
                        (click)="openImage(project.screens![project.currentIndex!].image)"
                    />
                </div>
                <div class="technologys-container">
                    <div class="technologys-content">
                        @for (tech of project.technologies; track tech) {
                            <p class="technology">{{tech}}</p>
                        }
                    </div>
                </div>
                <div class="buttons">
                    <a class="btn-project" (click)="openProjectDetails(project)">
                        <i class="fa-solid fa-plus"></i>
                        Detalhes
                    </a>
                    @if (project.accessUrl != '#') {
                        <a [href]="project.accessUrl" target="_blank" class="btn-project">
                            <i class="fa-solid fa-link"></i>
                            Acessar
                        </a>
                    }
                </div>
            </div>
        </div>
        <button (click)="scrollRight()" [disabled]="atEnd">
            <i class="fa fa-arrow-right arrow"></i>
        </button>
    </div>
</section>

@if (imageModalSrc) {
    <div class="modal-image" (click)="closeImage()" @fadeInZoomUp>
        <button class="close-btn" (click)="closeImage()">
            <i class="fa-solid fa-xmark"></i>
        </button>
        <div class="modal-image-container">
            <img [src]="imageModalSrc" alt="Imagem ampliada" (click)="$event.stopPropagation()">
        </div>
    </div>
}

@if (selectedProject) {
  <div class="modal-projects" @fadeInZoomUp>
    <app-project-details [project]="selectedProject" (close)="closeProjectDetails()" />
  </div>
}